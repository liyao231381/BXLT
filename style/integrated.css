/* CSS Reset (Simplified) - 基础样式重置 */
    body, h1, h2, h3, p, ul, li, figure {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      font: inherit;
      vertical-align: baseline;
      box-sizing: border-box; /* 确保 padding 和 border 包含在元素的总宽度和高度内 */
    }

    body {
      font-family: -apple-system, BlinkMacMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      line-height: 1.6;
      background-color: #f4f4f4;
      color: #333;
      display: flex; /* 使用 Flexbox 实现全屏三列布局 */
      min-height: 100vh; /* 确保页面至少占满视口高度 */
      overflow-x: hidden; /* 防止水平滚动 */
    }

    ul {
      list-style: none; /* 移除列表默认点 */
    }

    a {
      text-decoration: none; /* 移除链接下划线 */
      color: inherit; /* 链接颜色继承父级 */
    }

    img {
      max-width: 100%; /* 图片不超过父容器 */
      display: block; /* 移除图片底部空白 */
    }

    /* 全局布局 */
    .integrated-container {
      display: flex;
      width: 100%;
      max-width: 100vw; /* 确保全屏宽度 */
      max-height: 100vh; /* 确保全屏高度 */
    }

    /* 左侧画廊列 */
    .gallery-column {
      flex: 1; /* 占据一份空间 */
      min-width: 300px; /* 最小宽度 */
      max-height: 100vh; /* 最大高度为视口高度 */
      background-color: #f4f4f4;
      padding: 5px;
      overflow-y: auto; /* 允许内容滚动 */
      display: flex;
      flex-direction: column;
      scrollbar-width: thin;
    }

    /* 中间详情页列 */
    .detail-column {
      flex: 1; /* 占据一份空间 */
      min-width: 300px; /* 最小宽度 */
      max-height: 100vh; /* 最大高度为视口高度 */
      background-color: #fff;
      padding: 5px;
      overflow-y: auto; /* 允许内容滚动 */
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      align-items: flex-start; /* 内容从左上角开始 */
      justify-content: flex-start; /* 内容从顶部开始 */
      position: relative; /* 用于定位详情内容 */
      scrollbar-width: thin;
    }
    .detail-column .product-detail-content {
        width: 100%;
        background-color: #fff;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
        display: none; /* 初始隐藏 */
        margin: 0 auto; /* 居中显示 */
        overflow-y: auto;
    }
    .detail-column .product-detail-content.active {
        display: block; /* 选中时显示 */
    }
    .detail-column .placeholder-message {
        width: 100%; /* 确保占位符也居中 */
        text-align: center;
        color: #888;
        padding: 20px;
        font-size: 1.1rem;
        margin-top: 50px;
    }


    /* 右侧管理后台列 */
    .admin-column {
      flex: 1; /* 占据一份空间 */
      min-width: 300px; /* 最小宽度 */
      max-height: 100vh; /* 最大高度为视口高度 */
      background-color: #f4f4f4;
      overflow-y: auto; /* 允许内容滚动 */
      scrollbar-width: none; /* Firefox 隐藏滚动条 */
    }
    .admin-column .admin-container {
        max-width: 600px; /* 保持 admin.html 的最大宽度 */
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }


    /* 画廊头部样式 */
    header {
      background-color: #fff;
      padding: 15px 0;
      text-align: center;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* 轻微阴影 */
      flex-shrink: 0; /* 防止 header 缩小 */
    }

    header .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
    }

    nav {
      border-top: 1px solid #eee;
      padding-top: 10px;
    }
    
    /* 筛选器组样式 */
    .filter-group {
      margin-bottom: 10px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }
    .filter-group strong {
        color: #555;
        font-size: 0.9em;
        margin-right: 8px;
        flex-shrink: 0;
    }

    nav .filter-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    /* 筛选标签样式 */
    nav a.filter-tag {
        display: inline-block;
        padding: 4px 8px;
        background-color: #e9ecef;
        color: #495057;
        border-radius: 5px;
        font-size: 0.85rem;
        transition: background-color 0.2s, color 0.2s;
        flex-shrink: 0;
        cursor: pointer;
    }

    nav a.filter-tag.active {
      background-color: #00aaff;
      color: #fff;
    }
    nav a.filter-tag:hover:not(.active) {
        background-color: #d8dee3;
    }

    /* 商品列表网格布局 */
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(45%, 1fr)); /* 移动端双排 */
      gap: 5px;
      flex-grow: 1; /* 占据剩余空间 */
    }

    /* 商品卡片样式 */
    .product-card {
      background-color: #fff;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease-in-out;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .product-card:hover {
      transform: translateY(-5px);
    }
    .product-card > a { /* 使整个卡片可点击 */
        cursor: pointer;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .product-card img {
      width: 100%;
      height: auto; 
      aspect-ratio: 3 / 4; /* 维持 3:4 的宽高比 */
      object-fit: cover;
      object-position: center;
    }

    .product-info {
        padding: 10px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .product-name-price {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 5px;
        flex-wrap: wrap;
    }

    .product-name-price h2 {
      font-size: 1.1rem;
      font-weight: bold;
      margin: 0;
      flex-grow: 1;
      line-height: 1.3;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      order: 2; /* 名称在第二个 */
    }
    .product-name-price .price {
      font-size: 1.1rem;
      font-weight: bold;
      color: #e64a19;
      margin-right: 10px;
      flex-shrink: 0;
      order: 1; /* 价格在第一个 */
    }

    .product-tags, .product-season {
        font-size: 0.65rem;
        color: #777;
        margin-bottom: 3px;
        line-height: 1.2;
    }
    
    .product-tags span, .product-season span {
        display: inline-block;
        margin-right: 5px;
        padding: 2px 6px;
        border-radius: 3px;
    }

    .product-tags span {
        background-color: #f7f7df;
    }

    .product-season span {
        background-color: #e1f5ff;
    }

    .product-season {
        margin-top: auto;
        padding-top: 5px;
        border-top: 1px dashed #eee;
    }

    /* 商品详情页样式 (原模态框内容) */
    .product-detail-content .modal-nav {
        position: sticky;
        top: 0;
        left: 0;
        width: 100%;
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        z-index: 1001;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        padding: 5px 0;
    }

    .product-detail-content .modal-nav .back-button {
        font-size: 1rem;
        font-weight: normal;
        color: #333;
        text-decoration: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        padding: 5px 10px;
        border-radius: 5px;
        transition: background-color 0.2s;
        flex-shrink: 0;
    }
    .product-detail-content .modal-nav .back-button::before {
        content: '←';
        font-size: 1.4rem;
        line-height: 1;
    }

    .product-detail-content .modal-nav .product-title {
        flex-grow: 1;
        text-align: center;
        font-size: 1.1rem;
        font-weight: bold;
        color: #333;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .product-detail-content .modal-nav .modal-nav-price {
        font-size: 1.1rem;
        font-weight: bold;
        color: #e64a19;
        margin-left: 10px;
        flex-shrink: 0;
        padding: 5px 10px;
        border-radius: 5px;
    }

    .product-detail-content .modal-content-inner { /* 区分原 modal-content */
      max-width: 100%;
      min-width: 300px;
      position: relative;
      margin: 0 auto;
      padding-top: 10px;
      flex-grow: 1;
      overflow-y: auto;
    }

    /* 新增：图片容器与删除按钮样式 */
    .product-detail-content .image-wrapper {
        position: relative;
    }

    .product-detail-content .image-wrapper img {
      width: 100%;
      height: auto;
    }

    .product-detail-content .delete-image-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: rgba(220, 53, 69, 0.8); /* Red, slightly transparent */
        color: white;
        border: none;
        border-radius: 50%; /* Circular button */
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        cursor: pointer;
        opacity: 0; /* Hidden by default */
        transition: opacity 0.2s ease-in-out;
        z-index: 10; /* Ensure button is above image */
        /* display: none; */ /* 初始隐藏，通过 JS 控制 visible/display */
    }

    .product-detail-content .image-wrapper:hover .delete-image-btn {
        opacity: 1; /* Show on hover */
    }

    /* Controlled by JS to always show if API token is present */
    .product-detail-content .delete-image-btn.visible {
        opacity: 1;
    }

    .product-detail-content .delete-image-btn::before {
        content: '×'; /* Times symbol for close/delete */
        line-height: 1; /* Center vertically */
    }
    .product-detail-content .delete-image-btn:hover {
        background-color: #c82333; /* Darker red on hover */
    }

    .product-detail-content .modal-description {
        font-size: 0.95rem;
        color: #555;
        margin-top: 15px;
        padding: 10px;
        border-top: 1px dashed #eee;
    }


    footer {
      text-align: center;
      margin-top: 10px;
      padding: 5px 0;
      background-color: #ddd;
      font-size: smaller;
      font-weight: light;
      flex-shrink: 0; /* 防止 footer 缩小 */
    }

    /* 加载状态 */
    #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        font-size: 1.2rem;
        color: #007bff;
        text-align: center;
    }
    #loading-overlay span.spinner {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        border: 0.25rem solid rgba(0,0,0,.15);
        border-right-color: #007bff;
        border-radius: 50%;
        animation: spinner-border .75s linear infinite;
        margin-bottom: 10px;
    }
    @keyframes spinner-border {
        to { transform: rotate(360deg); }
    }
    
    #loading-overlay.hidden {
        display: none;
    }

    /* admin.html 样式 */
    .admin-column h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    /* 通用输入框和标签样式 */
    .admin-column label {
      font-weight: bold;
      flex-shrink: 0;
      margin-bottom: 0px;
      white-space: nowrap;
      text-align: left !important;
    }
    .admin-column input[type="text"],
    .admin-column input[type="number"] {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      flex-grow: 1;
      margin-bottom: 0;
    }
    /* 禁用状态的输入框样式 */
    .admin-column input:disabled {
        background-color: #e9ecef;
        cursor: not-allowed;
    }
    .admin-column button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    /* API Token 部分 */
    .admin-column .api-token-section {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    .admin-column .api-token-section label {
        margin-right: 10px;
    }
    .admin-column .api-token-section input {
        margin-right: 10px;
    }
    .admin-column .api-token-section button {
        padding: 8px 15px;
        font-size: 0.9em;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        flex-shrink: 0;
    }
    .admin-column .api-token-section button:hover:not(:disabled) {
        background-color: #0056b3;
    }

    /* 通用表单行，用于款式名称和价格 */
    .admin-column .form-item-row {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    .admin-column .form-item-row label {
        margin-right: 10px;
    }
    .admin-column .form-item-row input {
        width: 100%;
    }

    /* 标签分组 */
    .admin-column .tag-group {
      margin-bottom: 15px;
    }
    .admin-column .tag-group-header {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }
    .admin-column .tag-group-header label {
      margin-right: 10px;
    }
    .admin-column .tag-group-header input {
        width: 100%;
    }

    .admin-column .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-bottom: 10px;
      min-height: 25px;
      border: 1px solid #eee;
      padding: 5px;
      border-radius: 4px;
    }

    .admin-column .tag-item {
      background-color: #e9ecef;
      color: #495057;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background-color 0.2s, color 0.2s, opacity 0.2s;
    }

    .admin-column .tag-item.selected {
      background-color: #007bff;
      color: #fff;
    }
    /* 禁用状态的标签 */
    .admin-column .tag-item.disabled {
        pointer-events: none;
        opacity: 0.6;
        cursor: not-allowed;
    }

    /* 通用按钮样式 */
    .admin-column #upload-btn {
      width: 100%; /* 让上传按钮更显眼 */
      background-color: #28a745;
      padding: 12px 20px;
    }
    .admin-column #upload-btn:hover:not(:disabled) {
      background-color: #218838;
    }

    /* 拖拽区域 */
    .admin-column #drop-area {
      border: 2px dashed #ccc;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      margin: 10px 0 15px 0;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: #f8f9fa;
      transition: background-color 0.2s;
    }
    .admin-column #drop-area.drag-over {
      background-color: #e0e0e0;
      border-color: #007bff;
    }
    .admin-column #drop-area p {
        margin: 0;
        color: #666;
    }
    .admin-column #file-list {
        margin-top: 10px;
        font-size: 0.9em;
        color: #555;
        max-height: 100px;
        overflow-y: auto;
        width: 100%;
        text-align: left;
        padding-left: 10px;
    }
    .admin-column #file-list p {
        margin: 2px 0;
    }

    /* 状态消息 */
    #status-message { /* 调整为全局ID选择器，使其浮动在页面右上角 */
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 3000; /* 确保在最上层 */
      padding: 10px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      background-color: #c3e6cb;
      border: 1px solid #155724;
      display: none;
      font-size: 0.95em;
      font-weight: bold;
      text-align: center;
      max-width: 300px; /* 限制宽度 */
      word-wrap: break-word; /* 自动换行 */
    }
    #status-message.success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    #status-message.error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    /* Admin Selection Status - 隐藏此容器 */
    #admin-selection-status {
        display: none;
    }

    /* 媒体查询 */
    @media (max-width: 768px) {
        body {
            flex-direction: column; /* 小屏幕下改为垂直堆叠 */
        }
        .integrated-container { /* 确保容器在移动端也垂直堆叠 */
            flex-direction: column;
        }
        .gallery-column, .detail-column, .admin-column {
            width: 100%;
            min-width: unset;
            flex: none;
            max-height: 100vh; /* 移除最大高度限制，让内容自适应 */
        }
        .detail-column .product-detail-content {
            width: 90%; /* 移动端详情页宽度 */
            margin: 20px auto;
        }
    }
